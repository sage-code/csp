<!DOCTYPE html>
<html lang="en" data-bs-theme="dark"><head>
  <meta charset="utf-8">
  <meta name="description" content="Introduction to PHP control flow statements.">
  <meta name="author" content="Elucian Moise">
  <meta name="keywords" content="website, programming, php, decision, if statement, control flow>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Website title -->
  <title>PHP Control</title>  

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- Icon -->
  <link rel="icon" type="image/png"  href="https://sagecode.net/images/favicon.ico">  
  <!-- Prism Highlighter -->
  <link rel="stylesheet" href="https://sagecode.net/prism.css">
  <script src="https://sagecode.net/prism.js"></script>
  <!-- custom css -->
  <link rel="stylesheet" href="https://sagecode.net/sage.css">
  </head>
<body>

<div class="container">
        
<!-- header -->
<header class="row">
    <div class="col">
        <a href="https://sagecode.net"><img src="https://sagecode.net/images/sage-logo.svg" alt="Sage-Code Laboratory" height="80"/></a>
    </div>  
    <div class="col  bottom-right">
        <a href="index.html#php-index" rel="nofollow">index</a>&lt;--
    </div>
</header><hr>

<h1>PHP Control Flow</h1>


<div class="alert alert-secondary shadow-sm">
<p>A PHP script is built out of a series of statements. A statement can be an assignment, a function call, a loop or a conditional. Usually a statement end with a semicolon unless is the last statement before the closing tag: ?&gt;. In addition, statements can be encapsulated into groups by using curly braces: {...}.</p>
</div>


<h2>Decision: "if"</h2>
<p>This statement uses a logical conditional expression to make a decision about execution of next statement. It has two branches: "true" branch and "false" branch. On each branch we can execute one statement or multiple statements encapsulated into a block of code.</p>

<div align="center">
  <img src="../images/decision.jpg" alt="decision" srcset="../images/decision.svg" width="520" class="img-fluid protect rounded shadow border" >    
  <p>decision diagram</p>
</div>  

<p><b>Patterns:</b></p>

<pre><code class="language-php line-numbers">if (expr) {
   statements;
} // true block; 
else {
   statements;
}  // false block;
</code></pre>

<p><b>Alternative:</b></p>

<pre><code class="language-php line-numbers">if (expr):
   statements;
else:
   statements;
endif;   
</code></pre>

<h4>Notes:</h4>
<ul>
<li>Condition expression is enclosed in round parenthesis (...)</li>
<li>The <em>else</em> keyword and second branch are optional.&nbsp;</li>
</ul>

<h4>Example:</h4>
<pre><code class="language-php line-numbers">&lt;?php
//given two variables
$a = 1; $b = 2;
//check "greater then" relation
if ($b &gt; $a) {
    echo "$b is bigger than $a";
    $b = $a; // alter b
}
echo "&lt;br&gt;"; //new line
//check "equal" relation
if ($b == $a)
    echo "$b is equal to $a";
else
    echo "unexpected";
?&gt;</code></pre>

<p><b>Output:</b></p>
<pre><code class="language-output">2 is bigger than 1
1 is equal to 1</code></pre>

<p><b>Note:&nbsp;</b>In the example above make $a = $b, and will force next condition $a == $b to be true. 
So "else" condition will never happen. If you modify the program and make $b &lt;= $a, then you get: "unexpected" output.</p>

<h2>Decision Ladder</h2>

<p>Instead of nesting multiple if/else statement, you can create a multi-path statement using "elseif" keyword. 
This is called "ladder" and is common in many computer languages:<br /> <b>Example:</b></p>

<pre><code class="language-php line-numbers">&lt;?php
$a = 4; $b = 8;
if ($a &gt; $b) {
    echo "a is bigger than b";
} elseif ($a == $b) {
    echo "a is equal to b";
} else {
    echo "a is smaller than b";
}
?&gt;</code></pre>

<p><b>Alternative Syntax</b></p>
<p>As incredible as it sounds, PHP has an alternative syntax for block statements. It goes like this: Instead of using {...} to create a block, you can use ":" and end of block keyword: "endif".&nbsp;</p>
<pre><code class="language-php line-numbers">&lt;?php
$a = 4; $b = 8;
if ($a &gt; $b):
    echo "a is bigger than b";
elseif ($a == $b):
    echo "a is equal to b";
else:
    echo "a is smaller than b";
endif;
?&gt;</code></pre>

<p><b>Note:&nbsp;</b>The two syntax alternatives can not be combined. If you try, PHP compiler should fail.</p>

<h2>Ternary Operator</h2>

<p>As an alternative to "if" statement in expressions you can use a special operator "?" 
that can evaluate a condition and produce one result or another, depending on condition logical value: true or false.</p>
<h4>Example:</h4>

<pre><code class="language-php line-numbers">&lt;?php
$v = 1;
$r = (1 == $v) ? 'Yes' : 'No'; // $r is set to 'Yes'
echo $r; // expected: Yes
echo "&lt;br&gt;"; //new line
$r = (3 == $v) ? 'Yes' : 'No'; // $r is set to 'No'
echo $r; // expected: No
?&gt;</code></pre>

<h2>While Loop</h2>

<p>To create a repetitive block of code we use "while" keyword. 
This evaluate a condition and execute next block, several times until the condition become: false. 
If the condition is false in the first place the block is never executed and therefore "wile" loop 
behave like "if" statement in this case.</p>

<div align="center">
  <img src="../images/while.jpg" alt="decision" srcset="../images/while.svg" width="520" class="img-fluid protect rounded shadow border" >    
  <p>while loop diagram</p>
</div>  

<h4>Example:</h4>
<pre><code class="language-php line-numbers">&lt;?php
/* default syntax */
$i = 1;
while ($i &lt;= 10) {
    echo $i++, ",";
}
echo "&lt;br&gt;";
/* alternative syntax */
$i = 1;
while ($i &lt;= 10):
    echo $i,",";
    $i++;
endwhile;
?&gt;</code></pre>

<h2>do..while Loop</h2>
<p>Sometimes we need to execute a block, then decide if the block can finish or we need to repeat. In this case we start a loop using keyword: "do" and evaluate condition after block end using "while". This way the block is executed at least once.</p>


<div align="center">
  <img src="../images/do-while.svg" alt="do-while"  width="460" class="img-fluid protect rounded shadow border" >    
  <p>do-while diagram</p>
</div>  


<h4>Example:</h4>
<pre><code class="language-php line-numbers">&lt;?php
$i = 10;
do {
    echo $i--,",";
} while ($i &gt; 0);
?&gt;</code></pre>
<p><b>Note: </b>The alternative syntax does not work for "do..while" statement.</p>
<pre><code class="language-php line-numbers">&lt;?php
$i = 10;
/* will fail */
do:
    echo $i--,",";
while ($i &gt; 0);
?&gt;</code></pre>


<h2>Loop: "for"</h2>
<p>This loop is controlled by a variable and a condition. Usually the variable is incremented using operator "++" for each iteration. This statement uses an expression pattern easy to grok, created with 3 parts: (declaration; condition; increment). In PHP any of these parts is optional.</p>

<div class="alert alert-info"><b>Note:</b> 
Forcing a repetitive block to break or to continue is possible in for loop as well as in all other loops.
This can be done in a combination with two <b><em>if</em></b> statement. 
Regular loops do not need intrerultions but nested loops sometimes do.</p>
</div>

<div align="center">
  <img src="../images/for-loop.jpg" alt="continue" srcset="../images/for-loop.svg" width="520" class="img-fluid protect rounded shadow border" >    
  <p>Loop Intreruptions</p>
</div>  


<h4>Example:</h4>
<pre><code class="language-php line-numbers">&lt;?php
// default syntax, C like: */
for ($i = 1; $i &lt;= 10; $i++) {
    echo $i," ";
}
// end of line, prepare for next
echo "&lt;br&gt;";
// alternative syntax with break:
for ($i = 1;; $i++):
    if ($i &gt; 10) {
        break;
    }
echo $i," ";
endfor;
?&gt;</code></pre>

<p><b>Note:&nbsp;</b>In previous example, alternative syntax is not using a condition in "for" expression. So we use two semi-columns instead of one: ";;". Then we use "if" statement and "break" to interrupt the loop.</p>

<h2>Selector: "switch"</h2>
<p>The switch statement is a multi-path, value based selector. That means we use one value and we create a multiple cases for possible values. Each value can create a new logical path. There is a special case when no value is found then "default" case is executed.</p>

<div align="center">
<img src="../images/switch.jpg" alt="switch" srcset="../images/switch.svg" 
     width="300" class="img-fluid protect rounded shadow border" >    
<p>Switch Diagram</p>
</div>  

<h4>Example:</h4>
<p>Next example is for default syntax. It looks like C statement. For each case you must use ":" after the value and you need to issue "break" statement. This will force switch statement to terminate. If there is no break the statement continue to evaluate next cases until a break is reach, otherwise default branch is executed.</p>

<pre><code class="language-php line-numbers">&lt;?php
$i = 2;
switch ($i) {
    case 1:
        echo "i equals 1";
        break;
    case 2:
        echo "i equals 2";
        break;
    case 3:
        echo "i equals 3";
        break;
    case 4:
        echo "i equals 4";
        break;        
    default:
        echo "i is 0 or > 4";
}
?&gt;</code></pre>

<p><b>Alternative syntax:</b></p>

<p>Alternative syntax is ending the switch statement with keyword "endswitch". Observe beginning of the block is mark with ":" and not with {...}. This syntax is just redundant, there is no advantage to use it.</p>
<pre><code class="language-php line-numbers">&lt;?php
$i = 3;
switch ($i):
    case 0:
        echo "i equals 0";
        break;
    case 1:
        echo "i equals 1";
        break;
    case 2:
        echo "i equals 2";
        break;
    default:
        echo "i is not equal to 0, 1 or 2";
endswitch;
?&gt;</code></pre>

<h2>Jump: "goto"</h2>

<p>It is a legacy statement, not really necessary in your code. It is a good practice to avoid using it. However, sometimes you can make a shorter program using this statement. In next example we show how to exit from two nested loops using goto end:</p>
<pre><code class="language-php line-numbers">&lt;?php
/* Write your PHP code here */
$i = 0;
do {
    $j = 0;
    do {
        $j++;
        echo "($i, $j)";
        if (($i == 3) and ($j == 3)):
        goto end; //jump to end:
        endif;
    } while ($j &lt; 3);
    echo "&lt;br&gt;";
    $i++;
} while(true); //infinite loop
end: echo "&lt;br&gt;","done"; //label
?&gt;
</code></pre>

<p><b>Output:</b></p>

<pre><code class="language-output">
(0, 1)(0, 2)(0, 3) 
(1, 1)(1, 2)(1, 3) 
(2, 1)(2, 2)(2, 3) 
(3, 1)(3, 2)(3, 3) 
done
</code></pre>

<p><b>Note:&nbsp;</b>You can jump backwards to a prior defined label or forward. But you can not jump from outside of a loop to inside a loop. You can not jump into a function from another function. This makes goto more sage than it use to be in Fortran or Basic.</p>

<h2>Exceptions: "try"</h2>
<p>An exception is a abnormal situation that can lead to unpredictable results that can cause a program to stop functioning. Normally in such occasions the program will stop immediately and report an error or crash. </p>
<p>In PHP there is a flow control statement: "try" used to protect a sequence of code against exceptions. In case of an error we can "catch" exceptions and have a chance to analyze the situation. Then we can report an error message and continue or propagate the error.</p>

<h4>Example:</h4>

<pre><code class="language-php line-numbers">&lt;?php
$x = 0; //
try {
        if (!$x) {
        throw new Exception('Division by zero!');
    }
    echo 1/$x;
} catch (Exception $e) {
    echo 'Exception: ', $e-&gt;getMessage(), "&lt;br&gt;";
}
?&gt;</code></pre>

<p><b>Note:</b> This short program will always fail since $x is 0 and we know division by 0 is not possible. So we "throw" and Exception object with message: "Division by zero!".&nbsp;</p>
<p><b>Output:</b></p>

<pre><code class="language-output" style="color:red"> Exception: Division by zero!
</code></pre>

<p><b>Note:</b> This subject will be explained in more details in future articles, after you learn about functions, classes and objects. For now just remember one thing: "try" block is a control flow statement used to patch exceptions.</p>

<hr>

<p><b>Read next:</b>
<a href="functions.html">Functions</a></p>

<!-- Footer -->
<footer class="footer">
  <div class="footer-copyright text-center"></div>
</footer>


</div>


</body>
</html>