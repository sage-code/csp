<!DOCTYPE html>
<html lang="en" data-bs-theme="dark"><head>
  <meta charset="utf-8">
  <meta name="description" content="Introduction to Ruby decision statements.">
  <meta name="author" content="Elucian Moise">
  <meta name="keywords" content="ruby, language, syntax, decision, if statement">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Website title -->
  <title>Ruby Decision</title>  

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- Icon -->
  <link rel="icon" type="image/png"  href="https://sagecode.net/images/favicon.ico">  
  <!-- Prism Highlighter -->
  <link rel="stylesheet" href="../prism.css">
  <script src="../prism.js"></script>
  <!-- custom css -->
  <link rel="stylesheet" href="https://sagecode.net/sage.css">
  </head>
<body>

<div class="container">
        
<!-- header -->
<header class="row">
    <div class="col">
        <a href="https://sagecode.net"><img src="https://sagecode.net/images/sage-logo.svg" alt="Sage-Code Laboratory" height="80"/></a>
    </div>  
    <div class="col  bottom-right">
        <a href="index.html#ruby-index" rel="nofollow">index</a>&lt;--
    </div>
</header><hr>

<h2>Ruby Decision</h2>

<div class="alert alert-secondary shadow-sm">
Decision statement is one of the most important in any programming language. It is used to make a logical deduction of a conclusion based on several known premises. Once a decision is made you can control the execution of next statements.
</div>

<h3>Ternary operator</h3>
<p>Question mark "?" can be used in expressions to select one alternative depending on result of a Boolean expression.&nbsp; This is useful to create smarter expressions, for example let&rsquo;s simulate absolute function using ternary expression.</p>
<h4>Example:</h4>
<pre><code class="language-ruby line-numbers">#ask input for a number
print "enter +/- number:"
a = gets.chomp.to_i

#ternary operator in expression
b = a &lt; 0 ? -a: +a 
puts "b = #{b}"</code></pre>
<p><b>Note:</b>&nbsp; We have used method:&nbsp;<b>gets&nbsp;</b>to read user input and method:&nbsp;<b>to_i</b>&nbsp;to convert a string into integer. We have not yet reach conversion operations. But this is a good moment to learn more about it.</p>
<p><b>Homework:</b>&nbsp;run previous example twice using a positive and negative number:&nbsp;<a href="https://repl.it/@elucian/ruby-ternary-operator" target="_blank" rel="noopener noreferrer">ternary operator</a></p>

<h2>Conditional</h2>
<p>The "conditional" is a "logical expression" that you use to make a decision. Conditionals are used to enable execution of one or more statements when a condition is true or disable execution when false.</p>
<p>The conditional can be created using two alternate keywords: "if" or "unless". Alternative keyword "unless" is equivalent with "if" and negative condition. You can negate a condition using the complementary operators or negation: For example:&nbsp;<code><b>if !(a &gt; b)</b></code>&nbsp;is equivalent to:&nbsp;<code><b>unless (a &gt;= b)</b></code></p>
<p><b>Conditional execution:</b></p>
<p>In Ruby you can apply conditional to any statement as a suffix. This may look a bit strange at beginning for developers of Python or C. Let&rsquo;s investigate an example and you will grasp this idea quickly:</p>
<pre><code class="language-ruby line-numbers"># using conditionals

print "enter number in range (1..9):"
a = gets.to_i

# conditional execution: unless
puts "incorrect" unless (1..9).include?(a)

# conditional execution: if
puts "correct"   if (a &gt;= 1) &amp;&amp; (a &lt;= 9)
puts "too large" if (a &gt; 9)
puts "too small" if (a &lt; 1)</code></pre>
<p><b>Homework:&nbsp;</b>Open this example live:&nbsp;<a href="https://repl.it/@elucian/ruby-decision" target="_blank" rel="noopener noreferrer">ruby decision</a></p>
<ul>
<li>run it once, enter: 0</li>
<li>run it again, enter: 5</li>
<li>run it again, enter:&nbsp; 10</li>
</ul>
<p><b>Conditional expression:</b></p>
<p>You can use "if" keyword to produce one value depending on a specific condition. 
This technique is an alternative to "ternary" operator "?". It may be redundant but it is more readable and fun to use:</p>
<pre><code class="language-ruby line-numbers"># enter a number
print "number:"
b = gets.chomp.to_i

# calculate fraction
a = if b != 0 then 1.0/b else 0 end

if a &gt; 0
   puts "1/#{b} = #{a}"
else
   puts "error"
end</code></pre>

<p><b>Note:&nbsp;</b>As you can see in above example "if" keyword is used in two ways. 
First time it is used as expression, second time is used as statement. Also, keyword "then" is optional.</p>
<h2>Branches</h2>
<p>Imagine a river, it can split in branches and then it can merge back again into main stream. This is how you should picture your program. Like a river that flow downstream. This is called "logical flow" or "control flow". We can control creation of branches using conditionals.</p>

<div align="center">
  <img src="../images/decision.jpg" alt="decision" srcset="../images/decision.svg" 
  width="520" class="img-fluid protect rounded shadow border" >    
  <p>decision diagram</p>
</div>  

<h4>Example:</h4>
<pre><code class="language-ruby line-numbers"># using branches

print "enter one letter in range ('A'..'Z'):"
c = gets.chomp

# branch using if
if ('A'..'Z') === c then
  puts "correct: #{c}"
else  
  puts "incorrect #{c}"
end</code></pre>
<p><b>Homework:&nbsp;</b>Open this example live and run 3 times:&nbsp;<a href="https://repl.it/@elucian/ruby-branches" target="_blank" rel="noopener noreferrer">ruby branches</a></p>
<ol>
<li>run and enter a digit: 5</li>
<li>run and enter a lowercase letter: x</li>
<li>run and enter one uppercase letter: L</li>
</ol>
<h2>Ladder</h2>
<p>You can create multiple branch selection statement using "elsif" keyword. In other languages this keyword is "elif" or "else if". We use ladder to analyze multiple conditions and avoid using nested if statements.</p>

<div align="center">
  <img src="../images/ladder.jpg" alt="decision" srcset="../images/ladder.svg" 
  width="640" class="img-fluid protect rounded shadow border" >    
  <p>ladder diagram</p>
</div>  

<p><b>Example</b></p>
<pre><code class="language-ruby line-numbers"># multi-branch decision ladder
print "enter any character:" 
c = gets.chomp[0] 

if ('A'..'Z') === c then 
   puts "uppercase letter"
elsif ('a'..'z') === c then
   puts "lowercase letter"
elsif ('0'..'9') === c then
   puts "digit"
else
   puts "special character"
end</code></pre>
<p><b>Homework:&nbsp;</b>Open this example and run 4 times:&nbsp;<a href="https://repl.it/@elucian/ruby-ladder" target="_blank" rel="noopener noreferrer">ruby ladder</a></p>
<ol>
<li>enter a digit: 4</li>
<li>enter a uppercase character: G</li>
<li>enter a lowercase character: p</li>
<li>try to make an error: enter ?46</li>
</ol>
<p>Have fun already? If you have questions, contact us on Discord!</p>

<h2>Selection</h2>
<p>Remember in Ruby you can do one thing in many ways? You can replace "ladder" with "selection" statement. In other languages this statement is called "switch" but Ruby is using "case" instead.</p>
<p>This statement is called "selection" because it enables execution of one specific branch depending on a condition or value. It is more flexible than "switch" and in my opinion more useful.</p>

<p><b>Example 1:</b>Conditional selector:</p>
<pre><code class="language-ruby line-numbers"># input a character
print "enter any character:" 
c = gets.chomp[0] 

# multi-branch selection
case
  when ('A'..'Z') === c then 
    puts "uppercase letter"
  when ('a'..'z') === c then
    puts "lowercase letter"
  when ('0'..'9') === c then
    puts "digit"
  else
    puts "special character"
end</code></pre>
<p><b>Example 2:</b>Value selector.</p>
<pre><code class="language-ruby line-numbers"># input score from keyboard
print "enter your score (0..100):"
score = gets.chomp.to_i

# detect your qualification level
result = case score
   when 0..50   then "Novice"
   when 51..70  then "Beginner"
   when 71..80  then "Advanced"
   when 81..90  then "Proficient"
   when 91..100 then "Expert"
   else "Invalid Score"
end

puts result</code></pre>

<p><b>Homework:</b>Both examples are available live on repl.it website. Please open these examples and run them.</p>

<ul>
<li><a href="https://repl.it/@elucian/ruby-selection" target="_blank" rel="noopener noreferrer">ruby selection</a></li>
<li><a href="https://repl.it/@elucian/ruby-case-expression" target="_blank" rel="noopener noreferrer">ruby case expression</a></li>
</ul>

<p><b>Example 3: </b> Switch simulation.</p>
<pre><code class="language-ruby line-numbers"># Ask for a number and analyze
print "enter a number (0..9):"
n = gets.chomp.to_i

# Instead of switch use case
case n
  when 0
    puts ("n is zero;")
  when 1, 4, 9
    puts ("n is a perfect square;")
  when 2, 3, 5, 7
    puts ("n is a prime number;")
    puts ("n is also an even number;") if n == 2
  when 6, 8
    puts ("n is an even number;")
  else
    puts ("Only single-digit please.")
end
</code></pre>
<p><b>Homework:</b>&nbsp;run this example live 2 times:&nbsp;<a href="https://repl.it/@elucian/ruby-switch" target="_blank" rel="noopener noreferrer">ruby switch</a></p>
<ol>
<li>first time enter number: 4</li>
<li>second time enter number: 2</li>
</ol>
<p><b>Note:&nbsp;</b>There is no&nbsp;<b><em>break</em>&nbsp;</b>required like in other languages. Also there is no&nbsp;<em><b>fall&nbsp;</b></em><b><em>through.&nbsp;</em></b>Do your best to use a combination of selectors and conditionals to resolve special cases like in example the "2" case.</p>

<hr>

<p><b>Read next:</b>
<a href="repetition.html">Repetition</a></p>

<!-- Footer -->
<footer class="footer">
  <div class="footer-copyright text-center"></div>
</footer>


</div>


</body>
</html>